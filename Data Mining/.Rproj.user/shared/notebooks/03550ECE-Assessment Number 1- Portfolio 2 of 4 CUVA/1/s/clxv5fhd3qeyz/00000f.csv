"0","base_url <- ""https://www.autouncle.co.uk/en-gb/used-cars?page=""
start_page <- 1
num_pages <- 100

extract_text <- function(node, selector) {
  node %>% html_element(selector) %>% html_text(trim = TRUE) %>% ifelse(. == """", NA, .)
}

scrape_page <- function(url) {
  page <- tryCatch(read_html(url), error = function(e) return(NULL))
  if (is.null(page)) return(NULL)
  
  page %>% html_elements("".styles_listing-item__KWJkL"") %>%
    map_df(~ data.frame(
      Make_Model = extract_text(.x, "".styles_headline__TnlnI""),
      Price = extract_text(.x, "".styles_price_X069""),
      Mileage = extract_text(.x, "".styles_label_x4zE1:nth-child(2) .styles_text_eMFHA""),
      Year = extract_text(.x, "".styles_highlighted-attributes-container_EH8XY .styles_labelx4zE1:nth-child(1) .styles_text_eMFHA""),
      Fuel_Type = extract_text(.x, "".styles_label_x4zE1:nth-child(3) .styles_text_eMFHA""),
      Transmission = extract_text(.x, "".styles_highlighted-attributes-container_EH8XY .styles_labelx4zE1:nth-child(4) .styles_text_eMFHA""),
      Power = extract_text(.x, "".styles_label_x4zE1:nth-child(6) .styles_text_eMFHA""),
      Location = extract_text(.x, "".styles_location-container_dnoXo .styles_text_eMFHA""),
      stringsAsFactors = FALSE
    ))
}

all_cars <- map_df(start_page:(start_page + num_pages - 1), function(page_num) {
  url <- paste0(base_url, page_num)
  cat(""Scraping page:"", page_num, ""\n"")
  sleep_time <- runif(1, 2, 4)
  if (runif(1) < 0.1) { Sys.sleep(runif(1, 5, 10)) }
  Sys.sleep(sleep_time)
  scrape_page(url)
})
"
"1","Scraping page:"
"1"," "
"1","1"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","2"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","3"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","4"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","5"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","6"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","7"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","8"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","9"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","10"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","11"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","12"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","13"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","14"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","15"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","16"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","17"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","18"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","19"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","20"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","21"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","22"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","23"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","24"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","25"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","26"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","27"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","28"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","29"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","30"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","31"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","32"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","33"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","34"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","35"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","36"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","37"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","38"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","39"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","40"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","41"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","42"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","43"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","44"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","45"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","46"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","47"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","48"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","49"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","50"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","51"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","52"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","53"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","54"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","55"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","56"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","57"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","58"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","59"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","60"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","61"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","62"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","63"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","64"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","65"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","66"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","67"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","68"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","69"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","70"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","71"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","72"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","73"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","74"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","75"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","76"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","77"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","78"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","79"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","80"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","81"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","82"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","83"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","84"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","85"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","86"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","87"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","88"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","89"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","90"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","91"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","92"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","93"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","94"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","95"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","96"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","97"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","98"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","99"
"1"," "
"1","
"
"1","Scraping page:"
"1"," "
"1","100"
"1"," "
"1","
"
"0","View(all_cars)"
