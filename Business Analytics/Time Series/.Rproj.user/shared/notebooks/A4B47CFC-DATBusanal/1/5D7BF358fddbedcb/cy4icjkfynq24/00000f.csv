"0","# Generate forecasts for internal and external SARIMAX models"
"0","internal_fc <- forecast(manual_sarimax, xreg = test_x, h = length(test_y))"
"0","external_fc <- forecast(sarimax_brent_model, xreg = test_x, h = length(test_y))"
"0",""
"0","# Convert forecasts to time series for alignment"
"0","ts_auto     <- ts(auto_fc$mean, start = time(test_y)[1], frequency = 52)"
"0","ts_internal <- ts(internal_fc$mean, start = time(test_y)[1], frequency = 52)"
"0","ts_external <- ts(external_fc$mean, start = time(test_y)[1], frequency = 52)"
"0","ts_actual   <- ts(test_y, start = time(test_y)[1], frequency = 52)"
"0",""
"0","# Prepare data for plotting"
"0","df_plot <- data.frame("
"0","  Week = time(ts_actual),"
"0","  Actual = as.numeric(ts_actual),"
"0","  SARIMA = as.numeric(ts_auto),"
"0","  SARIMAX_Internal = as.numeric(ts_internal),"
"0","  SARIMAX_Brent = as.numeric(ts_external)"
"0",") %>%"
"0","  pivot_longer(-Week, names_to = ""Model"", values_to = ""Fuel_Price"")"
"0",""
"0","# Plot overlaid forecasts for comparison"
"0","ggplot(df_plot, aes(x = Week, y = Fuel_Price, colour = Model)) +"
"0","  geom_line(linewidth = 1) +"
"0","  scale_colour_manual(values = c("
"0","    ""Actual"" = ""red"","
"0","    ""SARIMA"" = ""black"","
"0","    ""SARIMAX_Internal"" = ""blue"","
"0","    ""SARIMAX_Brent"" = ""green"""
"0","  )) +"
"0","  labs("
"0","    title = ""Forecast Comparison: SARIMA vs SARIMAX Models"","
"0","    x = ""Time (Weeks)"", y = ""Fuel Price (Pence per Litre)"","
"0","    colour = ""Model"""
"0","  ) +"
"0","  theme_minimal()"
